!function(h){var o={treshold:4,maximumItems:5,highlightTyped:!0,highlightClass:"text-primary",startsWith:!1,class:""};function u(e,t,a){var l;if(a.highlightTyped)if(a.startsWith)l='<span class="'+a.highlightClass+'">'+t.label.substring(0,e.length)+"</span>"+t.label.substring(e.length,t.label.length);else{var o=t.label.toLowerCase().indexOf(e.toLowerCase());l=t.label.substring(0,o)+'<span class="'+a.highlightClass+'">'+t.label.substring(o,o+e.length)+"</span>"+t.label.substring(o+e.length,t.label.length)}else l=t.label;return'<button type="button" class="dropdown-item" data-value="'+t.value+'">'+l+"</button>"}function s(e,t){var a=e.val();if(a.length<t.treshold)return e.dropdown("hide"),0;var l=e.next();l.html("");for(var o=0,s=Object.keys(t.source),n=0;n<s.length;n++){var r=s[n],i=t.source[r],d={label:t.label?i[t.label]:r,value:t.value?i[t.value]:i};if((t.startsWith?d.label.toLowerCase().startsWith(a.toLowerCase()):0<=d.label.toLowerCase().indexOf(a.toLowerCase()))&&(l.append(u(a,d,t)),t.maximumItems&&++o>=t.maximumItems))break}return e.next().find(".dropdown-item").click(function(){e.val(h(this).text()),t.onSelectItem&&t.onSelectItem({value:h(this).data("value"),label:h(this).text()},e[0])}),l.children().length}h.fn.autocomplete=function(e){var t={};h.extend(t,o,e);var a=h(this);a.parent().removeClass("dropdown"),a.removeAttr("data-toggle"),a.removeClass("dropdown-toggle"),a.parent().find(".dropdown-menu").remove(),a.dropdown("dispose"),a.parent().addClass("dropdown"),a.attr("data-toggle","dropdown"),a.addClass("dropdown-toggle");var l=h('<div class= "dropdown-menu" ></div>');return l.addClass(t.class),a.after(l),a.dropdown(t.dropdownOptions),this.off("click.autocomplete").click("click.autocomplete",function(e){0==s(a,t)&&(e.stopPropagation(),a.dropdown("hide"))}),this.off("keyup.autocomplete").keyup("keyup.autocomplete",function(){0<s(a,t)?a.dropdown("show"):a.click()}),this}}(jQuery);